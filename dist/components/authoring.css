/************************************************************
 * VLAH DESIGN SYSTEM (VDS) - Authoring Layer
 *
 *  Responsibilities:
 *    - Provide the semantic toolbox for documentation: admonitions,
 *      MDX-style callouts, inline markers, footnotes, anchors, and prose helpers
 *    - Define consistent spacing, radii, typography, and borders for long-form
 *      content blocks across all VDS documentation pages
 *    - Supply robust heading-anchor behaviour and fully tokenised footnote
 *      structures for accessible technical writing
 *    - Integrate seamlessly with doc-block containers to unify documentation
 *      styling and preserve system-wide hierarchy
 *
 *  System Notes:
 *    - Pure CSS; no JavaScript dependencies or behavioural assumptions
 *    - Consumes tokens from primitives + active theme (Carbon/Graphite/Navy/Slate/Titanium)
 *    - Safe to compose inside doc-blocks, MDX content, and VDS specification pages
 *    - All variants are token-driven: info/success/warning/danger map directly
 *      to semantic-* tokens defined in the active theme
 ************************************************************/

/* ---------------------------------------------------------
   1. FOUNDATION / RESET
--------------------------------------------------------- */

[data-vds-authoring],
.vds-authoring,
.authoring,
.doc-authoring {
    --highlight-border-width: var(--border-width-strong);

    --admonition-radius: var(--radius-md);
    --admonition-border: var(--highlight-border-width);
    --admonition-gap: var(--space-3);
    --admonition-pad-y: var(--space-3);
    --admonition-pad-x: var(--space-4);
    --admonition-bg: var(--color-surface-subtle);
    --admonition-border-color: var(--color-border-subtle);
    --admonition-text: var(--color-text);
    --admonition-title-color: var(--color-text);
    --admonition-icon-color: var(--color-text);
    --admonition-shadow: none;

    --footnote-size: var(--text-xs);

    --marker-bg: var(--color-muted-bg);
    --marker-border: var(--color-muted-border);
    --marker-text: var(--color-text);
    --marker-radius: var(--radius-sm);
}

/* ---------------------------------------------------------
    2. ADMONITION SYSTEM (GitHub-style)
--------------------------------------------------------- */

.admonition {
    margin-top: var(--space-4);
    margin-bottom: var(--space-4);
    padding: var(--admonition-pad-y) var(--admonition-pad-x);

    display: flex;
    align-items: flex-start;
    gap: var(--admonition-gap);

    border: 0;
    border-radius: var(--admonition-radius);
    border-left: var(--admonition-border) solid var(--admonition-border-color);
    background-color: var(--admonition-bg);
    color: var(--admonition-text);
    box-shadow: var(--admonition-shadow);
}

.admonition__icon {
    flex-shrink: 0;
    margin-top: 0.15em;
    font-size: var(--text-lg);
    color: var(--admonition-icon-color);
    opacity: 0.85;
}

.admonition__content {
    flex: 1 1 auto;
    min-width: 0;
}

.admonition__title {
    font-size: var(--text-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: var(--space-1);
    color: var(--admonition-title-color);
}

.admonition__body {
    font-size: var(--text-sm);
    line-height: var(--line-height-relaxed);
}

.admonition__meta {
    font-size: var(--text-xs);
    opacity: 0.8;
    margin-top: var(--space-1);
}

.admonition__footer {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
    margin-top: var(--space-2);
    font-size: var(--text-xs);
    opacity: 0.85;
}

.admonition__actions {
    display: inline-flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-2);
}

.admonition__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    grid-gap: var(--space-1);
    gap: var(--space-1);
}

.admonition__list li {
    position: relative;
    padding-left: var(--space-4);
}

.admonition__list li::before {
    content: "";
    position: absolute;
    width: 0.4rem;
    height: 0.4rem;
    border-radius: 999px;
    background-color: var(--admonition-border-color);
    left: 0;
    top: 0.35rem;
}

.admonition--compact {
    padding-top: var(--space-2);
    padding-bottom: var(--space-2);
    padding-left: var(--space-3);
    padding-right: var(--space-3);
    gap: var(--space-2);
}

/* ---------------------------------------------------------
   2.1 ADMONITION VARIANTS
--------------------------------------------------------- */

:where(.admonition)[data-variant="info"],
.admonition--note,
.admonition--info {
    --admonition-bg: var(--semantic-info-bg);
    --admonition-border-color: var(--semantic-info-border);
    --admonition-text: var(--semantic-info-text);
    --admonition-title-color: var(--semantic-info-text);
    --admonition-icon-color: var(--semantic-info-text);
}

:where(.admonition)[data-variant="success"],
.admonition--tip,
.admonition--success {
    --admonition-bg: var(--semantic-success-bg);
    --admonition-border-color: var(--semantic-success-border);
    --admonition-text: var(--semantic-success-text);
    --admonition-title-color: var(--semantic-success-text);
    --admonition-icon-color: var(--semantic-success-text);
}

:where(.admonition)[data-variant="warning"],
.admonition--warning {
    --admonition-bg: var(--semantic-warning-bg);
    --admonition-border-color: var(--semantic-warning-border);
    --admonition-text: var(--semantic-warning-text);
    --admonition-title-color: var(--semantic-warning-text);
    --admonition-icon-color: var(--semantic-warning-text);
}

:where(.admonition)[data-variant="danger"],
.admonition--danger,
.admonition--important {
    --admonition-bg: var(--semantic-danger-bg);
    --admonition-border-color: var(--semantic-danger-border);
    --admonition-text: var(--semantic-danger-text);
    --admonition-title-color: var(--semantic-danger-text);
    --admonition-icon-color: var(--semantic-danger-text);
}

:where(.admonition)[data-variant="accent"],
.admonition--accent {
    --admonition-bg: var(--accent-soft-surface, var(--color-accent-soft));
    --admonition-border-color: var(--accent-soft-border, var(--color-accent));
    --admonition-text: var(--accent-soft-on, var(--color-on-accent));
    --admonition-title-color: var(--accent-soft-on, var(--color-on-accent));
    --admonition-icon-color: var(--accent-soft-on, var(--color-on-accent));
}

:where(.admonition)[data-variant="neutral"],
.admonition--neutral {
    --admonition-bg: var(--color-surface-subtle);
    --admonition-border-color: var(--color-border-strong);
    --admonition-text: var(--color-text);
    --admonition-title-color: var(--color-text);
    --admonition-icon-color: var(--color-text-muted);
}

.admonition--bordered {
    border: var(--admonition-border) solid var(--admonition-border-color);
    border-left-width: var(--admonition-border);
}

.admonition--outline {
    border: var(--admonition-border) solid var(--admonition-border-color);
    border-left-width: var(--admonition-border);
    background-color: transparent;
}

.admonition--plain {
    border: 0;
    background-color: transparent;
    padding: 0;
}

/* ---------------------------------------------------------
   3. MDX / MARKDOWN CALLOUTS
--------------------------------------------------------- */

.md-callout,
.md-note,
.md-info,
.md-tip,
.md-success,
.md-warning,
.md-danger,
.md-important {
    margin-top: var(--space-4);
    margin-bottom: var(--space-4);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-md);
    border-left: var(--highlight-border-width) solid currentColor;
    border-left: var(--highlight-border-width) solid var(--callout-border-color, currentColor);
    background-color: var(--callout-bg, var(--color-surface-subtle));
    color: var(--callout-text, var(--color-text));
    font-size: var(--text-sm);
    line-height: var(--line-height-relaxed);
}

.md-callout[data-variant="info"] {
    --callout-bg: var(--semantic-info-bg);
    --callout-border-color: var(--semantic-info-border);
    --callout-text: var(--semantic-info-text);
}

.md-callout[data-variant="success"] {
    --callout-bg: var(--semantic-success-bg);
    --callout-border-color: var(--semantic-success-border);
    --callout-text: var(--semantic-success-text);
}

.md-callout[data-variant="warning"] {
    --callout-bg: var(--semantic-warning-bg);
    --callout-border-color: var(--semantic-warning-border);
    --callout-text: var(--semantic-warning-text);
}

.md-callout[data-variant="danger"] {
    --callout-bg: var(--semantic-danger-bg);
    --callout-border-color: var(--semantic-danger-border);
    --callout-text: var(--semantic-danger-text);
}

.md-callout[data-variant="accent"] {
    --callout-bg: var(--accent-soft-surface, var(--color-accent-soft));
    --callout-border-color: var(--accent-soft-border, var(--color-accent));
    --callout-text: var(--accent-soft-on, var(--color-on-accent));
}

.md-callout[data-variant="neutral"] {
    --callout-bg: var(--color-surface-subtle);
    --callout-border-color: var(--color-border-strong);
    --callout-text: var(--color-text);
}

.md-note,
.md-info {
    --callout-bg: var(--semantic-info-bg);
    --callout-border-color: var(--semantic-info-border);
    --callout-text: var(--semantic-info-text);
}

.md-tip,
.md-success {
    --callout-bg: var(--semantic-success-bg);
    --callout-border-color: var(--semantic-success-border);
    --callout-text: var(--semantic-success-text);
}

.md-warning {
    --callout-bg: var(--semantic-warning-bg);
    --callout-border-color: var(--semantic-warning-border);
    --callout-text: var(--semantic-warning-text);
}

.md-danger,
.md-important {
    --callout-bg: var(--semantic-danger-bg);
    --callout-border-color: var(--semantic-danger-border);
    --callout-text: var(--semantic-danger-text);
}

/* ---------------------------------------------------------
   4. HEADING ANCHORS (Robust)
--------------------------------------------------------- */

.heading-anchor {
    margin-left: var(--space-1);
    font-size: 0.8em;
    -webkit-text-decoration: none;
    text-decoration: none;
    opacity: 0;
    color: var(--color-text-soft);
    transition: opacity var(--transition-fast);
}

.heading-anchor:hover {
    color: var(--link-text-hover);
}

h1:hover .heading-anchor,
h2:hover .heading-anchor,
h3:hover .heading-anchor,
h4:hover .heading-anchor,
h5:hover .heading-anchor,
h6:hover .heading-anchor,
h1:focus-within .heading-anchor,
h2:focus-within .heading-anchor,
h3:focus-within .heading-anchor,
h4:focus-within .heading-anchor,
h5:focus-within .heading-anchor,
h6:focus-within .heading-anchor {
    opacity: 1;
}

.heading-anchor--always {
    opacity: 1;
}

@media (hover: none) {
    .heading-anchor {
        opacity: 1;
    }
}

/* ---------------------------------------------------------
   5. FOOTNOTES
--------------------------------------------------------- */

.fn-ref {
    font-size: var(--footnote-size);
    vertical-align: super;
    color: var(--footnote-color, var(--color-text-muted));
    -webkit-text-decoration: none;
    text-decoration: none;
    margin-left: 0.15em;
}

.fn-ref:hover {
    color: var(--link-text-hover);
}

.fn-back {
    font-size: var(--footnote-size);
    -webkit-text-decoration: none;
    text-decoration: none;
    color: var(--footnote-color, var(--color-text-muted));
}

.footnotes {
    border-top: 1px solid var(--color-border-subtle);
    margin-top: var(--space-8);
    padding-top: var(--space-6);
    font-size: var(--footnote-size);
}

.footnotes ol {
    padding-left: var(--space-6);
}

.footnotes li {
    margin-bottom: var(--space-3);
}

/* ---------------------------------------------------------
   6. INLINE MARKERS (Highlight, warning, etc.)
--------------------------------------------------------- */

.inline-marker {
    display: inline-block;
    padding: 0 var(--space-1_5);
    border-radius: var(--marker-radius);
    background: var(--marker-bg);
    border: 1px solid var(--marker-border);
    font-size: var(--text-xs);
    line-height: 1.3;
    color: var(--marker-text);
}

:where(.inline-marker)[data-variant="info"],
.inline-marker--info {
    --marker-bg: var(--semantic-info-bg);
    --marker-border: var(--semantic-info-border);
    --marker-text: var(--semantic-info-text);
}

:where(.inline-marker)[data-variant="success"],
.inline-marker--success {
    --marker-bg: var(--semantic-success-bg);
    --marker-border: var(--semantic-success-border);
    --marker-text: var(--semantic-success-text);
}

:where(.inline-marker)[data-variant="warning"],
.inline-marker--warning {
    --marker-bg: var(--semantic-warning-bg);
    --marker-border: var(--semantic-warning-border);
    --marker-text: var(--semantic-warning-text);
}

:where(.inline-marker)[data-variant="danger"],
.inline-marker--danger {
    --marker-bg: var(--semantic-danger-bg);
    --marker-border: var(--semantic-danger-border);
    --marker-text: var(--semantic-danger-text);
}

:where(.inline-marker)[data-variant="accent"],
.inline-marker--accent {
    --marker-bg: var(--accent-soft-surface, var(--color-accent-soft));
    --marker-border: var(--accent-soft-border, var(--color-accent));
    --marker-text: var(--accent-soft-on, var(--color-on-accent));
}

:where(.inline-marker)[data-variant="neutral"],
.inline-marker--neutral {
    --marker-bg: var(--color-surface-subtle);
    --marker-border: var(--color-border-strong);
    --marker-text: var(--color-text);
}

.inline-marker--outline {
    background: transparent;
}

.inline-marker--pill {
    --marker-radius: var(--radius-pill);
}

/* ---------------------------------------------------------
   7. PROSE HELPERS (Authoring convenience)
--------------------------------------------------------- */

.prose-lead {
    font-size: var(--text-md);
    line-height: var(--line-height-relaxed);
    color: var(--color-text);
}

.prose-muted {
    color: var(--color-text-muted);
}

.prose-tight > * + * {
    margin-top: var(--space-2);
}

.prose-relaxed > * + * {
    margin-top: var(--space-6);
}

.prose-grid-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-gap: var(--space-6);
    gap: var(--space-6);
}

.prose-grid-3 {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-gap: var(--space-6);
    gap: var(--space-6);
}

.prose-grid-1-2 {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 2fr);
    grid-gap: var(--space-6);
    gap: var(--space-6);
}

.prose-grid-2-1 {
    display: grid;
    grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
    grid-gap: var(--space-6);
    gap: var(--space-6);
}

@media (max-width: 1024px) {
    .prose-grid-2 {
        grid-template-columns: 1fr;
    }

    .prose-grid-3 {
        grid-template-columns: 1fr;
    }

    .prose-grid-1-2,
    .prose-grid-2-1 {
        grid-template-columns: 1fr;
    }
}

/* ---------------------------------------------------------
   8. AUTHORING / DOC-BLOCK INTEGRATION
--------------------------------------------------------- */

.doc-block__body .admonition {
    margin-top: var(--space-3);
    margin-bottom: var(--space-3);
}

.doc-block__body .md-note,
.doc-block__body .md-info,
.doc-block__body .md-tip,
.doc-block__body .md-success,
.doc-block__body .md-warning,
.doc-block__body .md-danger,
.doc-block__body .md-important,
.doc-block__body .md-callout {
    margin-top: var(--space-3);
    margin-bottom: var(--space-3);
}
