/************************************************************
 * VLAH DESIGN SYSTEM (VDS) - Overlays
 *
 *  Responsibilities:
 *    - Provide backdrop, modal, drawer, and inline overlay primitives
 *    - Support density, size, layout, and state variants
 *    - Enable multi-layer stacking for nested confirmations
 *    - Keep all overlay surfaces token-driven and layout-neutral
 *
 *  System Notes:
 *    - Fully token-driven: spacing, radii, borders, colours, z-index, motion
 *    - Pure CSS; JS toggles visibility and focus management
 *    - No animations by default for stability and accessibility
 ************************************************************/

/* ---------------------------------------------------------
   1. OVERLAYS TOKEN DEFINITIONS
--------------------------------------------------------- */

[data-vds-overlay],
.vds-overlay {
    --modal-width-xs: 22.5rem;
    --modal-width-sm: 26.25rem;
    --modal-width-md: 40rem;
    --modal-width-lg: 51.25rem;
    --modal-width-xl: 65rem;
    --modal-loader-size-lg: 2.5rem;

    --drawer-width: 22.5rem;

    --modal-width-workspace: 58rem;
    --modal-workspace-min-height: 26rem;
    --modal-workspace-max-height: calc(100vh - var(--space-10));
}

/* ---------------------------------------------------------
   2. OVERLAY BACKDROP
--------------------------------------------------------- */

.backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    background-color: var(--overlay-backdrop-default);

    backdrop-filter: none;

    z-index: 80;

    z-index: var(--z-backdrop, 80);

    pointer-events: none;
    opacity: 0;
}

.backdrop--light {
    background-color: var(--overlay-backdrop-light);
}

.backdrop--heavy {
    background-color: var(--overlay-backdrop-heavy);
}

.backdrop--blocking {
    background-color: var(--overlay-backdrop-heavy);
    cursor: not-allowed;
}

.backdrop--active {
    pointer-events: auto;
    opacity: 1;
}

/* ---------------------------------------------------------
   3. BASE MODAL (NO ANIMATION)
--------------------------------------------------------- */

.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    display: flex;
    align-items: center;
    justify-content: center;

    z-index: 90;

    z-index: var(--z-modal, 90);

    pointer-events: none;
    opacity: 0;

    transform: none;

    transition: none;
}

.modal--active {
    pointer-events: auto;
    opacity: 1;
}

.modal__inner {
    background-color: var(--color-surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border-subtle);

    box-shadow: var(--shadow-3);

    width: 100%;
    max-width: var(--modal-width-md);
    max-height: calc(100vh - var(--space-20));

    display: flex;
    flex-direction: column;

    overflow: hidden;
    pointer-events: auto;

    transition: none;
}

/* ---------------------------------------------------------
   4. MODAL HEADER / BODY / FOOTER
--------------------------------------------------------- */

.modal__header {
    padding: var(--space-6) var(--space-8);
    border-bottom: 1px solid var(--color-border-subtle);

    display: flex;
    align-items: center;
    justify-content: space-between;
}

.modal__title {
    font-size: var(--text-lg);
    font-weight: 600;
}

.modal__close {
    background: none;
    border: none;
    padding: var(--space-2);
    display: inline-flex;
    cursor: pointer;
    color: var(--color-text-muted);
}

.modal__body {
    padding: var(--space-8);
    overflow-y: auto;
    flex: 1;
}

.modal__footer {
    padding: var(--space-6) var(--space-8);
    border-top: 1px solid var(--color-border-subtle);

    display: flex;
    justify-content: flex-end;
    gap: var(--space-4);
}

/* ---------------------------------------------------------
   5. MODAL DENSITY VARIANTS
--------------------------------------------------------- */

.modal--a .modal__header,
.modal--a .modal__footer {
    padding: var(--space-8) var(--space-10);
}

.modal--a .modal__body {
    padding: var(--space-10);
}

.modal--b .modal__header,
.modal--b .modal__footer {
    padding: var(--space-6) var(--space-8);
}

.modal--b .modal__body {
    padding: var(--space-8);
}

.modal--c .modal__header,
.modal--c .modal__footer {
    padding: var(--space-4) var(--space-6);
}

.modal--c .modal__body {
    padding: var(--space-6);
}

/* ---------------------------------------------------------
   6. MODAL SIZES
--------------------------------------------------------- */

.modal--xs .modal__inner {
    max-width: var(--modal-width-xs);
}

.modal--sm .modal__inner {
    max-width: var(--modal-width-sm);
}

.modal--md .modal__inner {
    max-width: var(--modal-width-md);
}

.modal--lg .modal__inner {
    max-width: var(--modal-width-lg);
}

.modal--xl .modal__inner {
    max-width: var(--modal-width-xl);
}

.modal--full .modal__inner {
    max-width: none;
    width: 100%;
    height: 100%;
    border-radius: 0;
}

/* ---------------------------------------------------------
   7. MODAL USE-CASE VARIANTS
--------------------------------------------------------- */

.modal--workspace .modal__inner {
    max-width: var(--modal-width-workspace);
    min-height: var(--modal-workspace-min-height);
    max-height: var(--modal-workspace-max-height);
}

.modal--confirm .modal__inner {
    max-width: var(--modal-width-xs);
}

.modal--confirm .modal__header,
.modal--confirm .modal__body,
.modal--confirm .modal__footer {
    text-align: center;
}

.modal--confirm .modal__footer {
    justify-content: center;
}

.modal--blocking .modal__close {
    display: none;
}

.modal__body--form {
    display: grid;
    grid-gap: var(--space-6);
    gap: var(--space-6);
}

.modal__section {
    display: grid;
    grid-gap: var(--space-3);
    gap: var(--space-3);
}

.modal__divider {
    height: 1px;
    border: none;
    background-color: var(--color-border-subtle);
}

.modal__footer--split {
    justify-content: space-between;
    align-items: center;
}

.modal__footer--stack {
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
}

.modal__icon {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;

    background-color: var(--color-accent-soft);
    color: var(--accent-soft-on, var(--color-on-accent));
    font-size: var(--text-md);
    line-height: 1;
}

.modal__icon--success {
    background-color: var(--color-success-soft);
    color: var(--color-success-strong);
}

.modal__icon--danger {
    background-color: var(--color-danger-soft);
    color: var(--color-danger-strong);
}

.modal__icon--info {
    background-color: var(--color-info-soft);
    color: var(--color-info-strong);
}

.modal__icon--warning {
    background-color: var(--color-warning-soft);
    color: var(--color-warning-strong);
}

/* ---------------------------------------------------------
   8. MOBILE FULL-SCREEN & BOTTOM-SHEET (NO ANIMATIONS)
--------------------------------------------------------- */

@media (max-width: 768px) {

    .modal--fullscreen-mobile .modal__inner {
        width: 100%;
        height: 100%;
        border-radius: 0;
        max-width: none;
        max-height: none;
    }

    .modal--sheet {
        align-items: flex-end;
    }

    .modal--sheet .modal__inner {
        width: 100%;
        max-width: none;
        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        max-height: 80vh;
    }

    body.modal-open {
        overflow: hidden;
    }
}

/* ---------------------------------------------------------
   9. MODAL STATES
--------------------------------------------------------- */

.modal--success .modal__header {
    border-bottom-color: var(--color-success);
    background-color: var(--color-success-soft);
    color: var(--semantic-success-text-strong, var(--color-success-strong));
}

.modal--danger .modal__header {
    border-bottom-color: var(--color-danger);
    background-color: var(--color-danger-soft);
    color: var(--semantic-error-text-strong, var(--color-danger-strong));
}

.modal--info .modal__header {
    border-bottom-color: var(--color-info);
    background-color: var(--color-info-soft);
    color: var(--semantic-info-text-strong, var(--color-info-strong));
}

.modal--warning .modal__header {
    border-bottom-color: var(--color-warning);
    background-color: var(--color-warning-soft);
    color: var(--semantic-warning-text-strong, var(--color-warning-strong));
}

/* ---------------------------------------------------------
   10. LOADING OVERLAY (NO BLUR)
--------------------------------------------------------- */

.modal--loading .modal__inner {
    position: relative;
}

.modal--loading .modal__loader {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    backdrop-filter: none;
    background-color: var(--overlay-backdrop-loading);

    display: flex;
    align-items: center;
    justify-content: center;

    z-index: 2;
}

.modal--loading .modal__loader-icon {
    width: var(--modal-loader-size-lg);
    height: var(--modal-loader-size-lg);
    stroke: var(--color-accent);
    fill: none;
}

/* ---------------------------------------------------------
   11. DRAWERS (NO ANIMATIONS)
--------------------------------------------------------- */

.drawer {
    position: fixed;
    top: 0;
    bottom: 0;

    width: var(--drawer-width);
    max-width: 90vw;

    background-color: var(--color-surface);

    border-left: 1px solid var(--color-border-subtle);
    border-right: 1px solid var(--color-border-subtle);

    box-shadow: var(--shadow-3);

    z-index: 95;

    z-index: var(--z-drawer, 95);

    display: flex;
    flex-direction: column;

    transition: none;
}

.drawer--left {
    left: 0;
}

.drawer--right {
    right: 0;
}

.drawer--hidden {
    display: none;
}

.drawer:not(.drawer--hidden) {
    display: flex;
}

.drawer__header,
.drawer__footer {
    padding: var(--space-6);
    border-bottom: 1px solid var(--color-border-subtle);
}

.drawer__footer {
    border-top: 1px solid var(--color-border-subtle);
    border-bottom: none;
}

.drawer__body {
    padding: var(--space-6);
    overflow-y: auto;
    flex: 1;
}

/* ---------------------------------------------------------
   12. INLINE OVERLAY PANEL
--------------------------------------------------------- */

.overlay-inline-container {
    position: relative;
}

.overlay-inline {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;

    z-index: 10;

    border-radius: var(--radius-md);
    border: 1px solid var(--color-border-subtle);
    background-color: var(--color-surface);
    box-shadow: var(--shadow-1);

    display: none;
}

.overlay-inline--active {
    display: block;
}

.overlay-inline__header {
    padding: var(--space-4) var(--space-6);
    border-bottom: 1px solid var(--color-border-subtle);
}

.overlay-inline__body {
    padding: var(--space-6);
}

.overlay-inline--info {
    border-color: var(--semantic-info-border);
    background-color: var(--semantic-info-bg);
    color: var(--semantic-info-text);
}

.overlay-inline--success {
    border-color: var(--semantic-success-border);
    background-color: var(--semantic-success-bg);
    color: var(--semantic-success-text);
}

.overlay-inline--warning {
    border-color: var(--semantic-warning-border);
    background-color: var(--semantic-warning-bg);
    color: var(--semantic-warning-text);
}

.overlay-inline--danger {
    border-color: var(--semantic-danger-border);
    background-color: var(--semantic-danger-bg);
    color: var(--semantic-danger-text);
}

/* ---------------------------------------------------------
   13. SPLIT MODAL
--------------------------------------------------------- */

.modal--split .modal__inner {
    display: grid;
    grid-template-columns: 2fr 1fr;
}

.modal__side {
    border-left: 1px solid var(--color-border-subtle);
    padding: var(--space-8);
    overflow-y: auto;
}

@media (max-width: 768px) {
    .modal--split .modal__inner {
        display: flex;
        flex-direction: column;
    }

    .modal__side {
        border-left: none;
        border-top: 1px solid var(--color-border-subtle);
    }
}

/* ---------------------------------------------------------
   14. OPTIONAL MODAL CHROME REMOVAL
--------------------------------------------------------- */

.modal--no-header .modal__header {
    display: none;
}

.modal--no-footer .modal__footer {
    display: none;
}

/* ---------------------------------------------------------
   15. STACKING LEVELS
--------------------------------------------------------- */

.modal--level-2 {
    z-index: calc(90 + 10);
    z-index: calc(var(--z-modal, 90) + 10);
}

.modal--level-3 {
    z-index: calc(90 + 20);
    z-index: calc(var(--z-modal, 90) + 20);
}

.backdrop--level-2 {
    z-index: calc(80 + 10);
    z-index: calc(var(--z-backdrop, 80) + 10);
}

.backdrop--level-3 {
    z-index: calc(80 + 20);
    z-index: calc(var(--z-backdrop, 80) + 20);
}

/*# sourceMappingURL=overlays.css.map */